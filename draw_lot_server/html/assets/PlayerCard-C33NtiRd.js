/* empty css                  *//* empty css                  *//* empty css                        */import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as I,o as s,c as f,i as p,d as m,w as t,g,e as r,h as c,t as _,F as N,f as V,s as k,E as R,l as F,p as M,M as T,D as $,G as j,B as A}from"./index-BF88ooPF.js";const G={class:"player-card"},L={class:"player-info"},O={class:"action-buttons"},U={__name:"PlayerCard",props:{player:{type:Object,default:null},showSkillSelect:{type:Boolean,default:!1},allowPlayerChange:{type:Boolean,default:!1},maxScore:{type:Number,default:1},skills:{type:Array,default:()=>[]},fetchScore:{type:Function,default:e=>e.firstRoundScore??e.secondRoundScore??e.thirdRoundScore??e.finalScore??0}},emits:["update:player","score-change","skill-change","reset-player","select-player"],setup(e,{emit:S}){const a=e,d=S,i=I(!1),v=()=>{if(!a.player)return;const o=a.fetchScore(a.player);if(o>=a.maxScore){k.warning("已达到最大胜场数");return}d("score-change",a.player.playerId,o+1),i.value=!1},w=()=>{if(!a.player)return;const o=a.fetchScore(a.player);if(o<=0){k.warning("胜场数已为0");return}d("score-change",a.player.playerId,o-1),i.value=!1},h=()=>{d("reset-player"),i.value=!1},b=o=>{d("skill-change",o)};return(o,l)=>{const C=R,y=F,u=M,x=T,E=$,B=j,P=A;return s(),f("div",G,[!e.player&&e.allowPlayerChange?(s(),f("div",{key:0,class:"select-player",onClick:l[0]||(l[0]=n=>o.$emit("select-player"))}," 选择选手 ")):p("",!0),e.player?(s(),m(x,{key:1,visible:i.value,"onUpdate:visible":l[1]||(l[1]=n=>i.value=n),placement:"bottom",width:200,trigger:"click"},{reference:t(()=>[g("div",L,[r(C,{src:e.player.avatar,style:{width:"150px",height:"200px"}},null,8,["src"]),r(y,null,{default:t(()=>[c(_(e.player.name),1)]),_:1})])]),default:t(()=>[g("div",O,[r(u,{onClick:v},{default:t(()=>l[2]||(l[2]=[c("增加胜场")])),_:1}),r(u,{onClick:w},{default:t(()=>l[3]||(l[3]=[c("减少胜场")])),_:1}),e.allowPlayerChange?(s(),m(u,{key:0,onClick:h},{default:t(()=>l[4]||(l[4]=[c("重置选手")])),_:1})):p("",!0)])]),_:1},8,["visible"])):p("",!0),e.showSkillSelect&&e.player?(s(),m(P,{key:2,placement:"bottom-start",onCommand:b},{dropdown:t(()=>[r(B,null,{default:t(()=>[(s(!0),f(N,null,V(e.skills,n=>(s(),m(E,{key:n,command:n},{default:t(()=>[c(_(n),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:t(()=>[r(u,{class:"skill-button"},{default:t(()=>[r(y,null,{default:t(()=>l[5]||(l[5]=[c("选用技:")])),_:1}),r(y,null,{default:t(()=>{var n;return[c(_(((n=e.player)==null?void 0:n.firstRoundSkill)||""),1)]}),_:1})]),_:1})]),_:1})):p("",!0)])}}},Q=D(U,[["__scopeId","data-v-eb237634"]]);export{Q as _};
