/* empty css                  *//* empty css                        */import{a as H,r as s,b as L,d as k,u as W,o as u,w as l,e as i,c as f,f as w,n as V,g as y,h,t as v,F as T,i as E,j as D,k as U,E as J,l as K,m as Q,p as X,q as Y}from"./index-Bs2KS5_D.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $=[{playerId:1,name:"节操",isBetter:!0,avatar:"/imgs/1节操.jpg"},{playerId:2,name:"可恶",isBetter:!0,avatar:"/imgs/2可恶.jpg"},{playerId:3,name:"hobo",isBetter:!0,avatar:"/imgs/3hobo.png"},{playerId:4,name:"纳助",isBetter:!0,avatar:"/imgs/4纳助.jpg"},{playerId:5,name:"Aq",isBetter:!0,avatar:"/imgs/5Aq.jpg"},{playerId:6,name:"仞",isBetter:!0,avatar:"/imgs/6仞.jpg"},{playerId:7,name:"嘤花",isBetter:!0,avatar:"/imgs/7嘤花.jpg"},{playerId:8,name:"仪式",isBetter:!0,avatar:"/imgs/8仪式.jpg"},{playerId:9,name:"yoshiteru",isBetter:!0,avatar:"/imgs/9yoshiteru.jpg"},{playerId:10,name:"AHTT",isBetter:!0,avatar:"/imgs/10AHTT.jpg"},{playerId:11,name:"ka9de",isBetter:!0,avatar:"/imgs/11ka9de.jpg"},{playerId:12,name:"弎千",isBetter:!0,avatar:"/imgs/12弎千.jpg"},{playerId:13,name:"030",isBetter:!0,avatar:"/imgs/13 030.jpg"},{playerId:14,name:"akira",isBetter:!0,avatar:"/imgs/14akira.jpg"},{playerId:15,name:"可无",isBetter:!0,avatar:"/imgs/15可无.jpg"},{playerId:16,name:"鸡米花",isBetter:!0,avatar:"/imgs/16鸡米花.jpg"},{playerId:17,name:"壹零",isBetter:!1,avatar:"/imgs/17壹零.jpg"},{playerId:18,name:"文文",isBetter:!1,avatar:"/imgs/18文文.png"},{playerId:19,name:"珩樾",isBetter:!1,avatar:"/imgs/19珩樾.jpg"},{playerId:20,name:"鱼丸",isBetter:!1,avatar:"/imgs/20鱼丸.jpg"},{playerId:21,name:"猫又",isBetter:!1,avatar:"/imgs/21猫又.jpg"},{playerId:22,name:"坑蒙拐骗",isBetter:!1,avatar:"/imgs/22坑蒙拐骗.jpg"},{playerId:23,name:"咸鱼",isBetter:!1,avatar:"/imgs/23咸鱼.jpg"},{playerId:24,name:"琪露诺",isBetter:!1,avatar:"/imgs/24琪露诺.jpg"},{playerId:25,name:"noel",isBetter:!1,avatar:"/imgs/25noel.jpg"},{playerId:26,name:"果绘",isBetter:!1,avatar:"/imgs/26果绘.jpg"},{playerId:27,name:"饿大",isBetter:!1,avatar:"/imgs/27饿大.jpg"},{playerId:28,name:"天冥",isBetter:!1,avatar:"/imgs/28天冥.jpg"},{playerId:29,name:"美洲大镰",isBetter:!1,avatar:"/imgs/29美洲大镰.jpg"},{playerId:30,name:"fz",isBetter:!1,avatar:"/imgs/30fz.jpg"},{playerId:31,name:"nana",isBetter:!1,avatar:"/imgs/31nana.jpg"},{playerId:32,name:"鱼仙",isBetter:!1,avatar:"/imgs/32鱼仙.jpg"}],ee={class:"form"},ae={class:"part1_id"},te={class:"group_id"},re={class:"part3_id"},se={class:"form"},le=Object.assign({name:"PreGroupView",inheritAttrs:!1},{__name:"PreGroupView",setup(ne){const O=D(),_=W(),G=H(()=>_.getters["group/compGroup"]),I=s([]),B=s([]),F=Object.assign({}),g=s([]),b=s(!0),p=s([]),d=s([]),n=s(0);L(async()=>{try{await Promise.all(Object.keys(F).map(e=>{const a=F[e];return a().then(r=>r.default)})),G.value&&G.value.length>0?(console.log("load pre round from store"),g.value=G.value.map(e=>({...e,isSelect:e.firstRoundGroup!==-1}))):(console.log("first open pre round, generated data"),g.value=$.map(e=>{let a={playerId:e.playerId,name:e.name,isBetter:e.isBetter,avatar:e.avatar,firstRoundGroup:-1,isFirstWinner:!1,secondRoundScore:0,secondRoundOrder:0,thirdRoundScore:0,thirdRoundOrder:0,isThirdWinner:!1,finalScore:0,finalOrder:0,isFinalWinner:!1};return _.dispatch("group/addToGroup",a),a})),p.value=g.value.filter(e=>e.isBetter),d.value=g.value.filter(e=>!e.isBetter),I.value=g.value.filter(e=>e.isBetter&&e.firstRoundGroup!==-1).sort((e,a)=>e.firstRoundGroup-a.firstRoundGroup),B.value=g.value.filter(e=>!e.isBetter&&e.firstRoundGroup!==-1).sort((e,a)=>e.firstRoundGroup-a.firstRoundGroup),n.value=B.value.length,b.value=!1}catch(e){console.error("图片加载失败",e),b.value=!1}});const j=s(!1),m=s(null),c=s(null);async function q(){if(n.value===16||j.value)return;j.value=!0,console.log("轮播开始"),A(),await M(1e3-n.value*60),console.log("轮播结束"),j.value=!1,_.dispatch("group/updateGroupFirstRoundGroup",{playerId:p.value.at(m.value).playerId,firstRoundGroup:n.value}),_.dispatch("group/updateGroupFirstRoundGroup",{playerId:d.value.at(c.value).playerId,firstRoundGroup:n.value});const e=p.value.at(m.value),a=d.value.at(c.value);I.value.push(e),B.value.push(a),p.value.at(m.value).isSelect=!0,d.value.at(c.value).isSelect=!0,n.value=n.value+1}function A(){let e=Math.floor(Math.random()*p.value.length),a=Math.floor(Math.random()*d.value.length);m.value=(m.value+e)%p.value.length,c.value=(c.value+a)%d.value.length;const r=setInterval(()=>{if(!j.value){clearInterval(r);return}m.value=P(p.value,m.value),c.value=P(d.value,c.value)},50)}function P(e,a){let r=a;do r=(r+1)%e.length;while(e[r].isSelect);return r}function M(e){return new Promise(a=>setTimeout(a,e))}function N(){O.push("/FirstRound/FirstRoundView"),U(()=>{const e=document.querySelector(".part1"),a=document.querySelector(".part3");e&&a&&(e.style.height="auto",a.style.height="auto")})}return(e,a)=>{const r=J,R=K,S=Q,x=X,z=Y;return u(),k(z,{gutter:20},{default:l(()=>[i(S,{span:8,class:"part1"},{default:l(()=>[(u(!0),f(T,null,w(p.value,(t,o)=>(u(),f("div",{class:V(["body",{highlighted:o===m.value&&!t.isSelect,gray:t.isSelect}]),key:o},[y("div",ee,[i(r,{src:t.avatar,alt:t.name},null,8,["src","alt"]),i(R,{class:"id"},{default:l(()=>[h(v(o+1),1)]),_:2},1024),i(R,{class:"name"},{default:l(()=>[h(v(t.name),1)]),_:2},1024)])],2))),128))]),_:1}),i(S,{span:8,class:"part2"},{default:l(()=>[(u(!0),f(T,null,w(I.value.length,t=>{var o,C;return u(),f("div",{class:"mid-part",key:t},[y("div",ae,v((o=I.value[t-1])==null?void 0:o.name),1),y("div",te,v(String.fromCharCode(65+t-1)),1),y("div",re,v((C=B.value[t-1])==null?void 0:C.name),1)])}),128)),y("div",null,[n.value<16?(u(),k(x,{key:0,onClick:q},{default:l(()=>a[0]||(a[0]=[h("下一组")])),_:1})):E("",!0),n.value===16?(u(),k(x,{key:1,onClick:N},{default:l(()=>a[1]||(a[1]=[h("第一轮·半区对决")])),_:1})):E("",!0)])]),_:1}),i(S,{span:8,class:"part3"},{default:l(()=>[(u(!0),f(T,null,w(d.value,(t,o)=>(u(),f("div",{class:V(["body",{highlighted:o===c.value&&!t.isSelect,gray:t.isSelect}])},[y("div",se,[i(r,{src:t.avatar,alt:t.name},null,8,["src","alt"]),i(R,{class:"id"},{default:l(()=>[h(v(o+17),1)]),_:2},1024),i(R,{class:"name"},{default:l(()=>[h(v(t.name),1)]),_:2},1024)])],2))),256))]),_:1})]),_:1})}}}),de=Z(le,[["__scopeId","data-v-c35f8334"]]);export{de as default};
