/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css               */import{_ as ae}from"./PlayerCard-C33NtiRd.js";import{r as p,a as D,c as C,g as l,d as _,w as a,i as I,t as n,e as s,L as oe,u as se,p as ne,B as re,y as ue,C as de,o as d,h as w,F as S,f as V,n as F,j as ce,s as M,D as ie,G as pe,z as ve,H as _e,I as me}from"./index-BF88ooPF.js";import{c as z}from"./utils-BJkYNDuZ.js";/* empty css                        */import"./_plugin-vue_export-helper-DlAUqK2U.js";const fe={class:"second-round"},ge={class:"nextBt"},ye={class:"stopLoopBt"},he={class:"body"},Ce={class:"title fire-text"},we={class:"bgm-text"},Pe={class:"player-form"},ke={class:"pool"},be={class:"player-pool"},Be={class:"pp-table"},Ie={class:"bgm-pool"},Se={class:"bp-table"},Ve={class:"player-select-list"},Ee={class:"player-select-item"},Ge={class:"player-name"},Le={class:"player-select-list"},xe={class:"player-select-item"},Re={class:"player-name"},qe={__name:"Finals",setup(De){const m=p("巅峰对决 — 三局赛"),h=se(),N=ce(),P=p(h.getters["group/getBgm4"]),T=D(()=>z(P.value,4)),k=D(()=>h.getters["group/compGroup"].filter(o=>o.isThirdWinner===!0).sort((o,t)=>o.playerId-t.playerId)),U=z(k.value,2),r=p(null),u=p(null),b=p("点击选择BGM"),c=p(!1),i=p(!1),$=o=>{if(o){if(o===u.value){M.warning("左右两边不能选择相同的选手！");return}r.value=o,c.value=!1}},A=()=>{r.value=null},W=()=>{u.value=null},j=o=>{if(o){if(o===r.value){M.warning("左右两边不能选择相同的选手！");return}u.value=o,i.value=!1}},H=()=>{c.value=!0},q=()=>{i.value=!0},J=()=>{c.value=!1},K=()=>{i.value=!1},O=()=>{r.value=null,u.value=null,c.value=!1,i.value=!1},Q=()=>{m.value="总决赛",r.value=null,u.value=null,b.value="",c.value=!1,i.value=!1,console.log(h.getters["group/getBgm5"]),P.value=h.getters["group/getBgm5"]},X=o=>{b.value=o},Y=()=>{N.push("/Finals/FinalsWinnerList")};return(o,t)=>{const B=ne,Z=ie,ee=pe,le=re,E=ae,v=ve,G=ue,L=_e,x=me,R=de;return d(),C("div",fe,[l("div",ge,[m.value==="巅峰对决 — 三局赛"?(d(),_(B,{key:0,onClick:O},{default:a(()=>t[5]||(t[5]=[w("下一组")])),_:1})):I("",!0)]),l("div",ye,[m.value==="巅峰对决 — 三局赛"?(d(),_(B,{key:0,onClick:Q},{default:a(()=>t[6]||(t[6]=[w("进入总决赛阶段")])),_:1})):I("",!0),m.value==="总决赛"?(d(),_(B,{key:1,onClick:Y},{default:a(()=>t[7]||(t[7]=[w("结束比赛")])),_:1})):I("",!0)]),l("div",he,[l("div",Ce,n(m.value),1),l("div",{class:"bgm",onClick:t[0]||(t[0]=e=>o.showBgmSelect=!0)},[s(le,{size:"large",trigger:"click",onCommand:X},{dropdown:a(()=>[s(ee,null,{default:a(()=>[(d(!0),C(S,null,V(P.value,e=>(d(),_(Z,{key:e,command:e},{default:a(()=>[w(n(e),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:a(()=>[l("span",we,"BGM: "+n(b.value),1)]),_:1})]),l("div",Pe,[s(E,{player:r.value,"onUpdate:player":t[1]||(t[1]=e=>r.value=e),"allow-player-change":!0,"max-score":2,"fetch-score":e=>e.finalScore||0,onScoreChange:o.updateLeftPlayerScore,onSelectPlayer:H,onResetPlayer:A},null,8,["player","fetch-score","onScoreChange"]),t[8]||(t[8]=l("div",{class:"score"},[l("div",{class:"score-txt"},"VS")],-1)),s(E,{player:u.value,"onUpdate:player":t[2]||(t[2]=e=>u.value=e),"allow-player-change":!0,"max-score":2,"fetch-score":e=>e.finalScore||0,onScoreChange:o.updateRightPlayerScore,onSelectPlayer:q,onResetPlayer:W},null,8,["player","fetch-score","onScoreChange"])]),l("div",ke,[l("div",be,[t[9]||(t[9]=l("div",{class:"pp-title"},"选手池",-1)),l("div",Be,[s(G,{data:oe(U),border:"","show-header":!1},{default:a(()=>[s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[0].name),1)]),_:1}),s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[1].name),1)]),_:1})]),_:1},8,["data"])])]),l("div",Ie,[t[10]||(t[10]=l("div",{class:"bp-title"},"BGM池",-1)),l("div",Se,[s(G,{data:T.value,border:"","show-header":!1},{default:a(()=>[s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[0]),1)]),_:1}),s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[1]),1)]),_:1}),s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[2]),1)]),_:1}),s(v,{align:"center"},{default:a(({row:e})=>[l("span",null,n(e[3]),1)]),_:1})]),_:1},8,["data"])])])])]),s(R,{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),title:"选择选手",onClose:J,width:"30%"},{default:a(()=>[l("div",Ve,[(d(!0),C(S,null,V(k.value,e=>{var f,g;return d(),_(x,{key:e.playerId,class:F({"disabled-card":e.playerId===((f=u.value)==null?void 0:f.playerId)}),shadow:e.playerId===((g=u.value)==null?void 0:g.playerId)?"never":"hover",onClick:te=>{var y;return e.playerId!==((y=u.value)==null?void 0:y.playerId)&&$(e)}},{default:a(()=>[l("div",Ee,[s(L,{size:50,src:e.avatar},null,8,["src"]),l("span",Ge,n(e.name),1)])]),_:2},1032,["class","shadow","onClick"])}),128))])]),_:1},8,["modelValue"]),s(R,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),title:"选择选手",onClose:K,width:"30%"},{default:a(()=>[l("div",Le,[(d(!0),C(S,null,V(k.value,e=>{var f,g;return d(),_(x,{key:e.playerId,class:F({"disabled-card":e.playerId===((f=r.value)==null?void 0:f.playerId)}),shadow:e.playerId===((g=r.value)==null?void 0:g.playerId)?"never":"hover",onClick:te=>{var y;return e.playerId!==((y=r.value)==null?void 0:y.playerId)&&j(e)}},{default:a(()=>[l("div",xe,[s(L,{size:50,src:e.avatar},null,8,["src"]),l("span",Re,n(e.name),1)])]),_:2},1032,["class","shadow","onClick"])}),128))])]),_:1},8,["modelValue"])])}}};export{qe as default};
